<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working Saturdays</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap">
</head>
<body>
    <h1>Working Saturdays Calculator</h1>
    <div id="form-container">
        <div>
            <label for="startdate">Enter any working Saturday: </label>
            <input type="date" id="startdate">
        </div>
        <div>
            <label for="weekrange">For how many weeks: </label>
            <input type="number" id="weekrange">
        </div>
        <button onclick="showResult()">Show</button>
    </div>

    <div id="result" style="font-size: 18px; text-align: center; color: #333; padding: 20px; background-color: #f8f8f8; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);">
        <span style="font-size: 24px; color: #3498db;">Hold on! üê•</span><br>
        I'm finding those Saturdays for you... üêá
    </div>
    
    <div id="calendar-container">
        <div id="month-selector">
            <button onclick="changeMonth(-1)">Previous Month</button>
            <span id="current-month"></span>
            <button onclick="changeMonth(1)">Next Month</button>
        </div>
        <div id="calendar"></div>
    </div>
    
    <script>
        function showResult() {
            const startDateInput = document.getElementById("startdate");
            const selectedDate = new Date(startDateInput.value);
            const weekrange = parseInt(document.getElementById("weekrange").value, 10); // Parse the value as an integer            
            
            // Check if the entered value is non-negative
            if (weekrange < 0) {
                alert("You want to go back in time? üòÇ");
                return; // Stop the function if the input is invalid
            }
            if (weekrange === 0) {
                alert("Hmmm... Only you can know if you work this week or not üôÉ");
                return; // Stop the function if the input is invalid
            }

            const working = [];

            for (let i = 0; i < weekrange; i = i + 2) {
                const startdate = new Date(selectedDate);
                startdate.setDate(selectedDate.getDate() + (7 * i));
                working.push(new Date(startdate).toDateString());
            }

            // Display the result
            const resultContainer = document.getElementById("result");
            resultContainer.innerHTML = ""; // Clear previous results

            if (working.length > 0) {
                const resultHeader = document.createElement("span");
                resultHeader.style.fontSize = "24px";
                resultHeader.style.color = "#3498db";
                resultHeader.textContent = "Future working Saturdays:";
                resultContainer.appendChild(resultHeader);

                for (let j = 0; j < working.length; j++) {
                    const br = document.createElement("br");
                    const node = document.createTextNode(working[j]);
                    resultContainer.appendChild(br);
                    resultContainer.appendChild(node);
                }
            } else {
                resultContainer.textContent = "No future working Saturdays found.";
            }
        }

        const daysOfWeek = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
        const today = new Date();

        let currentMonth = today.getMonth();
        let currentYear = today.getFullYear();

        function generateCalendar() {
            const calendarContainer = document.getElementById('calendar');
            calendarContainer.innerHTML = '';

            // Set the current month in the header
            document.getElementById('current-month').textContent = `${new Date(currentYear, currentMonth).toLocaleString('en-GB', { month: 'long', year: 'numeric' })}`;

            // Generate header row with days of the week
            const headerRow = document.createElement('div');
            headerRow.classList.add('day');
            daysOfWeek.forEach(day => {
                const cell = document.createElement('div');
                cell.textContent = day;
                calendarContainer.appendChild(cell);
            });

            // Generate days for the month
            const firstDayOfMonth = new Date(currentYear, currentMonth, 1);
            const lastDayOfMonth = new Date(currentYear, currentMonth + 1, 0);
            // console.log(daysOfWeek[firstDayOfMonth.getDay()]);
            // console.log(lastDayOfMonth);
            const daysInMonth = lastDayOfMonth.getDate();

            emptyDays = daysOfWeek.indexOf(daysOfWeek[firstDayOfMonth.getDay()]) - 1;
            console.log(emptyDays);
            for (let i = 0; i < emptyDays; i++) {
                const cell = document.createElement('div');
                cell.classList.add('day');
                cell.textContent = "";

                cell.addEventListener('click', () => alert(`Clicked on ${date.toDateString()}`));

                calendarContainer.appendChild(cell);
            }
            for (let i = 1; i <= daysInMonth; i++) {
                const date = new Date(currentYear, currentMonth, i);
                const dayOfWeek = date.getDay();

                const cell = document.createElement('div');
                cell.classList.add('day');
                cell.textContent = i;
                
                // 0 - Monday, 6 - Sunday
                if (dayOfWeek === 6) {
                    // Highlight every second Friday as a working day
                    cell.classList.add('working-day');
                }

                cell.addEventListener('click', () => alert(`Clicked on ${date.toDateString()}`));

                calendarContainer.appendChild(cell);
            }
        }

        function changeMonth(delta) {
            currentMonth += delta;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            } else if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            generateCalendar();
        }

        // Initial calendar generation
        generateCalendar();
    </script>
</body>
</html>
